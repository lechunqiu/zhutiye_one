this.b5mshoppingassist||(this.b5mshoppingassist={}),function(S,undefined){S.define("common",["server","jquery-highcharts"],function(server,$){function rhex(a){for(str="",j=0;3>=j;j++)str+=hex_chr.charAt(a>>8*j+4&15)+hex_chr.charAt(a>>8*j&15);return str}function str2blks_MD5(a){for(nblk=(a.length+8>>6)+1,blks=new Array(16*nblk),i=0;16*nblk>i;i++)blks[i]=0;for(i=0;i<a.length;i++)blks[i>>2]|=a.charCodeAt(i)<<i%4*8;return blks[i>>2]|=128<<i%4*8,blks[16*nblk-2]=8*a.length,blks}function add(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function rol(a,b){return a<<b|a>>>32-b}function cmn(a,b,c,d,e,f){return add(rol(add(add(b,a),add(d,f)),e),c)}function ff(a,b,c,d,e,f,g){return cmn(b&c|~b&d,a,b,e,f,g)}function gg(a,b,c,d,e,f,g){return cmn(b&d|c&~d,a,b,e,f,g)}function hh(a,b,c,d,e,f,g){return cmn(b^c^d,a,b,e,f,g)}function ii(a,b,c,d,e,f,g){return cmn(c^(b|~d),a,b,e,f,g)}function calcMD5(e){for(x=str2blks_MD5(e),a=1732584193,b=-271733879,c=-1732584194,d=271733878,i=0;i<x.length;i+=16)olda=a,oldb=b,oldc=c,oldd=d,a=ff(a,b,c,d,x[i+0],7,-680876936),d=ff(d,a,b,c,x[i+1],12,-389564586),c=ff(c,d,a,b,x[i+2],17,606105819),b=ff(b,c,d,a,x[i+3],22,-1044525330),a=ff(a,b,c,d,x[i+4],7,-176418897),d=ff(d,a,b,c,x[i+5],12,1200080426),c=ff(c,d,a,b,x[i+6],17,-1473231341),b=ff(b,c,d,a,x[i+7],22,-45705983),a=ff(a,b,c,d,x[i+8],7,1770035416),d=ff(d,a,b,c,x[i+9],12,-1958414417),c=ff(c,d,a,b,x[i+10],17,-42063),b=ff(b,c,d,a,x[i+11],22,-1990404162),a=ff(a,b,c,d,x[i+12],7,1804603682),d=ff(d,a,b,c,x[i+13],12,-40341101),c=ff(c,d,a,b,x[i+14],17,-1502002290),b=ff(b,c,d,a,x[i+15],22,1236535329),a=gg(a,b,c,d,x[i+1],5,-165796510),d=gg(d,a,b,c,x[i+6],9,-1069501632),c=gg(c,d,a,b,x[i+11],14,643717713),b=gg(b,c,d,a,x[i+0],20,-373897302),a=gg(a,b,c,d,x[i+5],5,-701558691),d=gg(d,a,b,c,x[i+10],9,38016083),c=gg(c,d,a,b,x[i+15],14,-660478335),b=gg(b,c,d,a,x[i+4],20,-405537848),a=gg(a,b,c,d,x[i+9],5,568446438),d=gg(d,a,b,c,x[i+14],9,-1019803690),c=gg(c,d,a,b,x[i+3],14,-187363961),b=gg(b,c,d,a,x[i+8],20,1163531501),a=gg(a,b,c,d,x[i+13],5,-1444681467),d=gg(d,a,b,c,x[i+2],9,-51403784),c=gg(c,d,a,b,x[i+7],14,1735328473),b=gg(b,c,d,a,x[i+12],20,-1926607734),a=hh(a,b,c,d,x[i+5],4,-378558),d=hh(d,a,b,c,x[i+8],11,-2022574463),c=hh(c,d,a,b,x[i+11],16,1839030562),b=hh(b,c,d,a,x[i+14],23,-35309556),a=hh(a,b,c,d,x[i+1],4,-1530992060),d=hh(d,a,b,c,x[i+4],11,1272893353),c=hh(c,d,a,b,x[i+7],16,-155497632),b=hh(b,c,d,a,x[i+10],23,-1094730640),a=hh(a,b,c,d,x[i+13],4,681279174),d=hh(d,a,b,c,x[i+0],11,-358537222),c=hh(c,d,a,b,x[i+3],16,-722521979),b=hh(b,c,d,a,x[i+6],23,76029189),a=hh(a,b,c,d,x[i+9],4,-640364487),d=hh(d,a,b,c,x[i+12],11,-421815835),c=hh(c,d,a,b,x[i+15],16,530742520),b=hh(b,c,d,a,x[i+2],23,-995338651),a=ii(a,b,c,d,x[i+0],6,-198630844),d=ii(d,a,b,c,x[i+7],10,1126891415),c=ii(c,d,a,b,x[i+14],15,-1416354905),b=ii(b,c,d,a,x[i+5],21,-57434055),a=ii(a,b,c,d,x[i+12],6,1700485571),d=ii(d,a,b,c,x[i+3],10,-1894986606),c=ii(c,d,a,b,x[i+10],15,-1051523),b=ii(b,c,d,a,x[i+1],21,-2054922799),a=ii(a,b,c,d,x[i+8],6,1873313359),d=ii(d,a,b,c,x[i+15],10,-30611744),c=ii(c,d,a,b,x[i+6],15,-1560198380),b=ii(b,c,d,a,x[i+13],21,1309151649),a=ii(a,b,c,d,x[i+4],6,-145523070),d=ii(d,a,b,c,x[i+11],10,-1120210379),c=ii(c,d,a,b,x[i+2],15,718787259),b=ii(b,c,d,a,x[i+9],21,-343485551),a=add(a,olda),b=add(b,oldb),c=add(c,oldc),d=add(d,oldd);return rhex(a)+rhex(b)+rhex(c)+rhex(d)}var exports={console:{LEVEL:"DEBUG",setLevel:function(a){this.LEVEL=a},debug:function(a){if("DEBUG"==this.LEVEL)try{window.console.debug(this.msg(a))}catch(b){this.ieDebug(a)}},error:function(a){if("ERROR"==this.LEVEL)try{window.console.debug(this.msg(a))}catch(b){this.ieDebug(a)}},ieDebug:function(a){var b=this.msg(a);setTimeout(function(){var a=document.getElementById("b5m_test");a||(a=document.createElement("div"),a.id="b5m_test",a.style.display="none",document.body.appendChild(a));var c=a.innerHTML;c=[c,""+b+"</br>"].join(""),a.innerHTML=c},13)},msg:function(a){var b=new Date,c=function(a){return(10>a?"0":"")+a};return a=b.getFullYear()+"-"+c(b.getMonth()+1)+"-"+c(b.getDate())+" "+c(b.getHours())+":"+c(b.getMinutes())+":"+c(b.getSeconds())+" ["+this.LEVEL+"] [B5M] "+a}},clear_rules:[/^(https?:\/\/item\.taobao\.com\/item\.htm\?).*?(\bid\b=\d+)/,/^(https?:\/\/detail\.tmall\.com\/item.htm\?).*?(\bid\b=\d+)/,/^(https?:\/\/chaoshi\.detail\.tmall\.com\/item.htm\?).*?(\bid\b=\d+)/,/^(https?:\/\/www\.amazon\.cn)\/.+(\/dp\/[^/?&]+)/,/^https?:\/\/www\.amazon\.cn\/dp\/[^/?&]+/,/^https?:\/\/www\.amazon\.cn\/gp\/product\/[^/?&]+/,/^https?:\/\/item\.yhd\.com\/item\/[^/?&]+/,/(^https?:\/\/www\.5lux\.com\/goods\.php\?).*?(id=[^/?&]+)/],cleanPath:function(a){if(!a)return"";for(var b=this.clear_rules,c=b.length,d=null,e=0;c>e;e++)if(d=a.match(b[e]))return d.length>2?d[1]+d[2]:d[0];return a.replace(/[#?].*/,"")},placeholderSupport:function(){return"placeholder"in document.createElement("input")},clientApi:function(a){var b=document.getElementById("b5tplugin");try{return b[a]()}catch(c){return null}},getClientStatus:function(a){try{return this.getCache(a)}catch(b){return this.getB5MCookie(a)}},setClientStatus:function(a,b){try{this.setCache(a,b)}catch(c){this.setB5MCookie.apply(this,Array.prototype.slice.call(arguments,0))}},setCache:function(a,b){var c=document.getElementById("b5tplugin");c.setCacheValue(a,b+"")},getCache:function(a){var b=document.getElementById("b5tplugin"),c=b.getCacheValue(a);return c},setCookie:function(a,b,c){var d=this.getDomain(),e=a+"="+escape(b);e+="; path=/; domain="+d,c&&(e+="; expires="+c),document.cookie=e},getCookie:function(a){var b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!=b?unescape(b[2]):null},removeCookie:function(a){var b=new Date;b.setTime(b.getTime()-864e5),this.setCookie(a,"",b.toGMTString())},today:function(){var a=new Date,b=a.getMonth()+1;10>b&&(b="0"+b);var c=a.getDate();return 10>c&&(c="0"+c),a.getFullYear()+""+b+c},getTwoBit:function(a){return(a>9?"":"0")+a},date2Str:function(a,b){b=b||"-";var c=a.getFullYear(),d=this.getTwoBit(a.getMonth()+1),e=this.getTwoBit(a.getDate());return[c,d,e].join(b)},setB5MCookie:function(a,b,c){if(a){var d="";if(c)for(var e in c)d+="&"+e+"="+c[e];(new Image).src=server.server+"/extension.do?method=c&name="+a+"&value="+encodeURIComponent(b)+d+"&t="+(new Date).getTime()}},getB5MCookie:function(a,b){return!b&&S.cookie&&"string"==typeof a?S.cookie[a]:void((b||!S.cookie)&&$5m.ajax({url:server.server+"/extension.do?method=c",cache:!1,dataType:"jsonp",jsonp:"jsoncallback",async:!0,success:function(b){S.cookie=b,"function"==typeof a&&a(b)}}))},loadCss:function(a){var b=$5m('<link rel="stylesheet" href="'+a+'" type="text/css">');$5m("head").append(b)},loadScript:function(a,b){var c=S.util.$T("head",0),d=S.util.$C("script");d.type="text/javascript",0!==a.indexOf("http://")&&(a=server.server+a),d.src=a+"?v="+S.build_no,d.onload=d.onreadystatechange=function(){d.readyState&&"loaded"!==d.readyState&&"complete"!==d.readyState||(d.onload=d.onreadystatechange=null,b&&b())},S.util.$A(c,d)},toHttps:function(a){return 0==location.href.indexOf("https")&&0!=a.indexOf("https")&&(a=a.replace("http","https")),a},getDomain:function(a){var b="";try{b=a||(window.location||document.location).hostname,b=b.match(/([-\w]+\.\b(?:net\.cn|com\.hk|com\.cn|com|cn|net|org|cc|tv$|hk)\b)/)[1]}catch(c){}return b},pathResolve:function(a,b){if(!a)return"";if(b||(b=a,a=document.baseURI||$("head base").attr("href")||location.href),b.match(/^http:\/\//))return b;if(b.match(/^\/\//))return"http:"+b;a=a.replace(/\?.*/,"").replace(/^(?:http|https):\/\//,"");var c=a.replace(/\/.*/,""),d=a.lastIndexOf("/"),e=d>0?a.substring(0,d):a,f=e,g=b;if(0===b.indexOf("/"))return"http://"+c+b;if(0===b.indexOf("./"))return"http://"+c+b.substring(1);if(0!==b.indexOf("."))return"http://"+e+"/"+b;for(;0===g.indexOf("../");)f=f.substring(0,f.lastIndexOf("/")),g=g.substring(3);return"http://"+f+"/"+g},load:function(a){var b=document.createElement("SCRIPT");b.type="text/javascript",b.defer="defer",b.src=a,b.charset="utf-8";var c=!1;return b.onload=b.onreadystatechange=function(){c||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(c=!0,b.parentNode.removeChild(b))},document.body.appendChild(b),this},checklj:function(a){var b=S.site.pageInfo.price||S.site.pageInfo.prices;return b||"tmall.com"!=S.domain&&"tmall.hk"!=S.domain||(b=S.site.rule.info.prices()),b&&(parseFloat(S.util.cleanPrice(b))<5||parseFloat(S.util.cleanPrice(b))>8e3)?!1:"jd.hk"==S.domain?!1:"suning.com"==S.domain&&($(".btn-order").length>0||$("#addCart").hasClass("btn-addcart-disable"))?!1:"gome.com.cn"==S.domain&&$("#addCart").hasClass("disab")?!1:"yhd.com"==S.domain&&"\u65e0\u8d27"==$("#detailStockInfo").text()?!1:"amazon.cn"==S.domain&&$("#ddmAvailabilityMessage .a-color-error").length?!1:"yhd.com"!=S.domain||$("#addCart").is(":visible")?"yhd.com"==S.domain&&$("#price_countdown").is(":visible")?!1:"dangdang.com"!=S.domain||$("#part_buy_button").is(":visible")?"dangdang.com"==S.domain&&$("#part_buy_button").hasClass("disabled")?!1:"tmall.com"!=S.domain&&"tmall.hk"!=S.domain||$("#J_LinkBuy").is(":visible")||0!=$(".tm-chaoshi-add").length?("tmall.com"==S.domain||"tmall.hk"==S.domain)&&$(".tb-btn-wait,.tm-change-left,.noPost").length>0?!1:"tmall.com"!=S.domain&&"tmall.hk"!=S.domain||$("#J_LinkBuy").text().match(/\u7acb\u5373\u8d2d\u4e70|\u7acb\u523b\u8d2d\u4e70/)?"cart"!==a&&"amazon.cn"==S.domain?!1:server.hostname.match(/ju\.taobao\.com/)||($(".tm-promo-type").text()+"").match(/\u805a\u5212\u7b97/)?!1:"taobao.com"==S.domain&&$(".tb-hint").length>0?!1:"taobao.com"==S.domain&&0==$(".tb-btn-buy, .tb-btn-add").length?!1:"taobao.com"==S.domain&&($(".tb-icon-auto-consignment").length>0||$("#J_tbExtra").text().match(/\u865a\u62df\u5145\u503c/))?!1:"taobao.com"==S.domain&&$("#J_ShopInfo").length>0&&parseInt($("#J_ShopInfo").data("creditscore"))<=250?!1:S.site.isDetailPage&&S.rule.lj1yuan&&S.rule.lj1yuan.check&&!S.rule.lj1yuan.check()?!1:S.site.pageInfo&&S.site.pageInfo.title&&S.site.pageInfo.title.match(/\u70b9\u5361|\u81ea\u52a8\u53d1\u8d27/)?!1:S.LOCATION.href.match(/detail\.yao\.95095\.com\/item\.htm/)?!1:S.model.datasource.targetcategory&&S.model.datasource.targetcategory.match(/\u533b\u836f\u8ba1\u751f>\u4fdd\u5065\u54c1>|\u533b\u836f\u8ba1\u751f>\u836f\u54c1\u4fdd\u5065>|\u533b\u836f\u8ba1\u751f>\u4e2d\u836f\u7c7b\u4fdd\u5065\u54c1>|\u533b\u836f\u8ba1\u751f>\u4fdd\u5065\u54c1>|\u533b\u836f\u8ba1\u751f>\u836f\u54c1\u4fdd\u5065>|\u533b\u836f\u8ba1\u751f>\u4e2d\u836f\u7c7b\u4fdd\u5065\u54c1>|\u4e2d\u897f\u836f\u54c1/)?!1:!0:!1:!1:!1:!1},animateFloat:function(a,b,c){a.show(),setInterval(function(){a.animate(b,1e3).animate(c,1e3)},100)},sendToClient:function(a){var b=document.getElementById("b5tplugin");try{b?b.setCacheValue(a.key,a.value+""):document.dispatchEvent(new CustomEvent("b5mmsg",{detail:{action:"setCache",param:JSON.stringify(a)}}))}catch(c){throw new Error("error on setcache to client")}},numAdd:function(a,b){var c,d,e;try{c=(1*a).toString().split(".")[1].length}catch(f){c=0}try{d=(1*b).toString().split(".")[1].length}catch(f){d=0}return e=Math.pow(10,Math.max(c,d)),(a*e+b*e)/e},numSubtract:function(a,b){return this.numAdd(a,-b)},numMul:function(a,b){var c=0,d=a.toString(),e=b.toString();try{c+=d.split(".")[1].length}catch(f){}try{c+=e.split(".")[1].length}catch(f){}return Number(d.replace(".",""))*Number(e.replace(".",""))/Math.pow(10,c)},numAcc:function(arg1,arg2){var r1,r2,t1=0,t2=0;try{t1=arg1.toString().split(".")[1].length}catch(e){}try{t2=arg2.toString().split(".")[1].length}catch(e){}with(Math)return r1=Number(arg1.toString().replace(".","")),r2=Number(arg2.toString().replace(".","")),r1/r2*pow(10,t2-t1)},getPrice:function(a){a=(a||"0")+"";var b=-1;return-1!=(b=a.indexOf("."))?a=(a+"00").substring(0,b+3):a+=".00",a},cleanPrice:function(a){return $5m.trim(a).replace(",","").replace(/[\u00a5\uffe5\uff1a\u4e00-\u9fa5]/gi,"").replace(/[^\d]*(\d+\.\d*).*$/gi,"$1")},getDetailImg:function(){var a,b=S.site.pageInfo&&S.site.pageInfo.img;return S.site.detailRule&&S.site.detailRule.img&&(a="string"==typeof S.site.detailRule.img?$(S.site.detailRule.img):"function"==typeof S.site.detailRule.img?S.site.detailRule.img():S.site.detailRule.img),a&&a.length&&a[0].src||b},centerRWE:function(a){a.css("left",($(document).width()-a.width())/2)},ABTest:function(){var a="",b=S.params.uuid||" ";return b=b[b.length-1],a=b.match(/[0-7]/)?"A":b.match(/[a-f]/)?"B":"B"},getHash:function(a){var b,c=1,d=0;if(a)for(c=0,b=a.length-1;b>=0;b--)d=a.charCodeAt(b),c=(c<<6&268435455)+d+(d<<14),d=266338304&c,c=0!=d?c^d>>21:c;return c}},hex_chr="0123456789abcdef";return exports.md5=calcMD5,exports})}(this.b5mshoppingassist);